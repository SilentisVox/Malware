# Signing Code

<p>Signing code is a very important part of avoiding AV. Unisgned code throws huge red flags to any AV out there.</p>
<p>I personally sign my own code, and how I do is quite simple. Here are the steps I take</p>

```powershell
# REMEMBER TO RAN AS ADMINISTRATOR

# To build a self signed encrypted cert, you first need signtool.exe
# If you don't have signtool, go to https://learn.microsoft.com/en-us/windows/win32/seccrypto/signtool

# Set a strong plaintext password
$pwd = "YourStrongPassword"
$securePwd = ConvertTo-SecureString -String $pwd -Force -AsPlainText

# Choose dns name to whatever, I find legitimate names work best
$dnsName = "www.microsoft.com"

# Choose a location to store that temp cert and generate it
$certStorePath = "$HOME\Encrypted Certs"

$cert = New-SelfSignedCertificate -DnsName "$dnsName" -CertStoreLocation $certStorePath -Type CodeSigningCert 

# Set Pfx Export path
$pfxFilePath = "$HOME\Encrypted Certs\encrypted_cert.pfx"

#Export cert with secure-string password
Export-PfxCertificate -Cert $cert -FilePath $pfxFilePath -Password $securePwd


# Once ready to sign exe, use the bottom provided syntax
# Sign .exe with sign tool                                     (plain text password)                                                   adding legitimate software description here works best for me    exe path
# .\signtool.exe sign /f "$HOME\Encrypted Certs\encrypted_cert.pfx" /p $pwd /tr http://timestamp.digicert.com /td sha256 /fd sha256 /d "Microsoft Windows Legitimate Software Description Here LMAO" "C:\Path\To\Exe"
```
